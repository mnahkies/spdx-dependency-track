/** AUTOGENERATED - DO NOT EDIT **/
/* tslint:disable */

import {
  t_License,
  t_RepositoryScan,
  t_RepositoryScanDependency,
  t_RepositorySummary,
  t_scanRepositoriesJsonRequestBody,
} from "@/generated/models"
import {
  AbstractFetchClient,
  AbstractFetchClientConfig,
  Res,
  TypedFetchResponse,
} from "@nahkies/typescript-fetch-runtime/main"

export interface ApiClientConfig extends AbstractFetchClientConfig {}

export class ApiClient extends AbstractFetchClient {
  constructor(config: ApiClientConfig) {
    super(config)
  }

  async getLicenses(
    timeout?: number,
    opts?: RequestInit,
  ): Promise<TypedFetchResponse<Res<200, t_License[]>>> {
    const url = this.basePath + `/api/licenses`

    return this._fetch(url, {method: "GET", ...(opts ?? {})}, timeout)
  }

  async getRepositorySummaries(
    timeout?: number,
    opts?: RequestInit,
  ): Promise<TypedFetchResponse<Res<200, t_RepositorySummary[]>>> {
    const url = this.basePath + `/api/repositories/summaries`

    return this._fetch(url, {method: "GET", ...(opts ?? {})}, timeout)
  }

  async getRepositorySummary(
    p: {
      repositoryId: string
    },
    timeout?: number,
    opts?: RequestInit,
  ): Promise<TypedFetchResponse<Res<200, t_RepositorySummary>>> {
    const url = this.basePath + `/api/repositories/${p["repositoryId"]}/summary`

    return this._fetch(url, {method: "GET", ...(opts ?? {})}, timeout)
  }

  async getRepositoryScans(
    p: {
      repositoryId: string
    },
    timeout?: number,
    opts?: RequestInit,
  ): Promise<TypedFetchResponse<Res<200, t_RepositoryScan[]>>> {
    const url = this.basePath + `/api/repositories/${p["repositoryId"]}/scans`

    return this._fetch(url, {method: "GET", ...(opts ?? {})}, timeout)
  }

  async getRepositoryScan(
    p: {
      repositoryId: string
      scanId: string
      excludePermissive?: boolean
    },
    timeout?: number,
    opts?: RequestInit,
  ): Promise<TypedFetchResponse<Res<200, t_RepositoryScanDependency[]>>> {
    const url =
      this.basePath +
      `/api/repositories/${p["repositoryId"]}/scans/${p["scanId"]}`
    const query = this._query({excludePermissive: p["excludePermissive"]})

    return this._fetch(url + query, {method: "GET", ...(opts ?? {})}, timeout)
  }

  async scanRepositories(
    p: {
      requestBody: t_scanRepositoriesJsonRequestBody
    },
    timeout?: number,
    opts?: RequestInit,
  ): Promise<TypedFetchResponse<Res<204, void>>> {
    const url = this.basePath + `/api/repositories/scan`
    const headers = this._headers({"Content-Type": "application/json"})
    const body = JSON.stringify(p.requestBody)

    return this._fetch(
      url,
      {method: "POST", headers, body, ...(opts ?? {})},
      timeout,
    )
  }
}
